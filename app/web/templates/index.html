<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodeStreaker</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div class="bg-shape"></div>
    <div class="container">
      <div id="error-banner" style="display: none; padding: 12px 14px; margin-bottom: 16px; border-radius: 12px; background: #3a1f1f; color: #ffd7d7; border: 1px solid #5a2b2b;">
        Error loading status.
      </div>
      <header class="header">
        <div class="logo">
          <div class="logo-mark">CS</div>
          <div>
            <div class="title">CodeStreaker</div>
            <div class="subtitle">Daily commit + solve streaks</div>
          </div>
        </div>
        <div class="header-actions">
          <button class="avatar-chip ios-tap ios-button" id="change-avatar" type="button">
            <span class="avatar-badge" id="avatar-badge">üê∂</span>
            <span>Change</span>
          </button>
          <button class="pill ios-tap ios-button" id="refresh" type="button">Refresh</button>
        </div>
      </header>

      <section class="card status ios-tap ios-card">
        <div class="card-header">
          <h2>Today</h2>
          <span id="date">‚Äî</span>
        </div>
        <div class="metrics">
          <div class="metric">
            <div class="metric-title">GitHub commits</div>
            <div class="metric-value" id="github">0</div>
            <div class="metric-goal" id="github-goal">/0</div>
          </div>
          <div class="metric">
            <div class="metric-title">LeetCode solved</div>
            <div class="metric-value" id="leetcode">0</div>
            <div class="metric-goal" id="leetcode-goal">/0</div>
          </div>
        </div>
        <div class="streaks">
          <div class="streak-card">
            <div>Current streak</div>
            <div class="streak-num" id="current-streak">0</div>
          </div>
          <div class="streak-card">
            <div>Best streak</div>
            <div class="streak-num" id="best-streak">0</div>
          </div>
        </div>
      </section>

      <section class="card settings ios-tap ios-card">
        <h2>Goals</h2>
        <div class="segmented">
          <button class="seg-btn ios-tap ios-button" data-goal="low">Low</button>
          <button class="seg-btn ios-tap ios-button active" data-goal="default">Default</button>
          <button class="seg-btn ios-tap ios-button" data-goal="high">High</button>
        </div>
        <div class="goal-grid">
          <div class="goal-item">
            <label>GitHub commits/day</label>
            <input type="number" min="0" id="goal-github" />
          </div>
          <div class="goal-item">
            <label>LeetCode solved/day</label>
            <input type="number" min="0" id="goal-leetcode" />
          </div>
        </div>
        <button class="primary ios-tap ios-button" id="save-goals">Save goals</button>
      </section>

      <section class="card settings ios-tap ios-card">
        <h2>Reminders</h2>
        <div class="reminders">
          <input type="time" id="reminder-1" />
          <input type="time" id="reminder-2" />
        </div>
        <button class="primary ios-tap ios-button" id="save-reminders">Save reminders</button>
      </section>

      <section class="card settings ios-tap ios-card">
        <h2>Repos filter</h2>
        <p class="hint">Comma-separated owner/repo. Leave empty to count all repos.</p>
        <textarea id="repos" rows="2" placeholder="owner/repo, owner2/repo2"></textarea>
        <button class="primary ios-tap ios-button" id="save-repos">Save repos</button>
      </section>

      <section class="quick-actions">
        <button class="ghost ios-tap ios-button" id="open-settings">Open bot settings</button>
        <button class="ghost ios-tap ios-button" id="open-status">Check bot status</button>
      </section>
    </div>

    <div class="loading-overlay" id="loading-overlay" aria-hidden="true">
      <div class="spinner" role="status" aria-label="Loading"></div>
    </div>

    <div class="ios-sheet-backdrop" id="avatar-backdrop" aria-hidden="true"></div>
    <div class="ios-sheet" id="avatar-sheet" role="dialog" aria-modal="true" aria-label="Choose avatar">
      <div class="sheet-handle"></div>
      <h3>Choose avatar</h3>
      <div class="avatar-grid" id="avatar-grid"></div>
    </div>

    <script>
      window.__BOT_USERNAME__ = "{{ bot_username }}";
    </script>
    <script src="/static/app.js"></script>
  </body>
</html>
